

greet_user_task:
  description: >
    Greet the user warmly in Arabic when they first interact with the Trent platform.
    You must start every conversation with a warm Arabic welcome message.
    Use a greeting like "مرحبا! أهلاً وسهلاً بك في ترينت" (Hello! Welcome to Trent).
    Make the greeting friendly and inviting, letting the user know you're here to help them
    find the perfect products.
  expected_output: >
    A warm Arabic greeting message welcoming the user to Trent, such as:
    "مرحبا! أهلاً وسهلاً بك في ترينت. كيف يمكنني مساعدتك اليوم؟"
    (Hello! Welcome to Trent. How can I help you today?)
  agent: firebase_agent

query_products_task:
  description: >
    You MUST respond in Arabic at all times. All your output must be in Arabic.
    
    When a user asks about existing products or asks to "show all categories", handle it as follows:
    
    If the user asks to "show all categories" or "show all products" or similar requests:
    - Get ALL products from the products collection without any category filter
    - Use the Firebase Tool with these parameters:
      {
        "operation": "query",
        "collection": "products",
        "return_objects": true
      }
    - Display all products organized by category in Arabic
    
    If the user mentions a specific category in their query:
    - Use that category directly to query products filtered by that category
    - Use the Firebase Tool with these parameters:
      {
        "operation": "query",
        "collection": "products",
        "query_conditions": [
          {
            "field": "category",
            "operator": "==",
            "value": "<category_name>"
          }
        ],
        "return_objects": true
      }
    
    If the user asks about products without specifying a category:
    - FIRST ask them which category they are interested in
    - Ask the user in Arabic: "ما هي الفئة التي تريد استعراض المنتجات منها؟" 
      (What category would you like to browse products from?)
    - Wait for the user to provide a category name
    
    After getting the results:
    1. Format them in a readable way in Arabic
    2. Report the total number of products found in Arabic
    3. List all product details in Arabic (title, price, description, etc.)
    4. If no products are found, politely inform the user in Arabic and ask if
       they'd like to try another category
  expected_output: >
    A detailed analysis in Arabic of the queried products including:
    - The category name (if filtered by category) or "جميع الفئات" (all categories)
    - Total count of products in Arabic
    - List of all products with their details in Arabic (title, price, description, etc.)
    - Any insights about the product data in Arabic
    - If no products found, a polite message in Arabic asking if they'd like to try another category
  agent: firebase_agent

recommend_products_task:
  description: >
    You MUST respond in Arabic at all times. All your output must be in Arabic.
    
    First, greet the user warmly in Arabic with "مرحبا! أهلاً وسهلاً بك في ترينت" (Hello! Welcome to Trent).
    Then, given a `user_query` input (user needs or a question), analyze the query and return
    5 product recommendations from the `products` collection in Firebase.
    Steps:
      1. Start by greeting the user in Arabic: "مرحبا! أهلاً وسهلاً بك في ترينت. كيف يمكنني مساعدتك اليوم؟"
      2. Read the `user_query` input provided to the crew (this will be available in inputs as `user_query`).
      3. Use the Firebase Tool with a `query` operation to obtain product documents. You may request
         structured results (JSON) when possible to enable precise matching.
      4. From the product fields (e.g., title, description, tags, category), find and rank the top 5
         matches for the user's query. Prefer products that match keywords, categories, or explicit
         features requested by the user.
      5. For each recommended product include in Arabic: title, price (if available), short description, and why
         it was recommended (1-2 sentence rationale in Arabic).
      6. If there are fewer than 5 good matches, return the top matches and indicate that fewer were found in Arabic.
  expected_output: >
    A concise list in Arabic of up to 5 recommended products, each with:
      - title (in Arabic if available, or original title)
      - price (if available)
      - short description in Arabic
      - short rationale for recommendation in Arabic
    All output must be in Arabic.
  agent: firebase_agent


